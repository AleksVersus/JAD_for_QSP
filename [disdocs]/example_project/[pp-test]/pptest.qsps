QSP-Game тестовый файл для препроцессинга. "Первой или второй строкой могут идти команды !@pp:on или !@pp:off - включающие и выключающие препроцессинг"
!@pp:on
Далее можно выставлять метки и их значения. Например ниже метке name выставлено значение 123
!@pp:var(name=123)
Можно определить только название метки и проверять затем лишь её наличие:
!@pp:var(layer1)
Метки можно определять и дальше по ходу препроцессинга.
# [start]
! команды препроцессора должны быть записаны отдельной строкой
!@pp:if(name==123):exclude
"Данные строки кода будут исключены из конечного файла,
так как инструкция exclude указывает препроцессору на это,
а условие name==123 выполняется. Исключение строк завершается
после команды !@pp:endif"
!@pp:endif
"Спецкомментарии удобны для быстрой разметки строк для препроцессинга.
!@ спецкомментарий такого рода будет удалён из строки кода в конечном файле.
!@< если в строке стоит такой спецкомментарий, вся строка кода будет удалена при препроцессинге
Исключение составляют строки кода, обрабатываемые с предварительным отключением обработки спецкоментариев,
а так же все строки, помещённые внутрь кавычек, апострофов и фигурных скобок."
clr & clear & !@< спецкомментарий, который помечает строку под удаление при препроцессинге
p "Текст для вывода в окно дополнительного описания" & !@ спецкомментарий, который будет удалён из строки при препроцессинге
nl "Ещё строка текста для вывода в окно дополнительного описания." & ! обычный комментарий. С ним ничего не сделается
! можно добавлять спецкомментарии в конце обычных комментариев, это тоже будет работать !@ спецкомментарий удалится
! данная строка кода (комментарий) так же будет удалена !@<
"Для отключения обработки спецкомментариев можно использовать безусловную команду !@pp:savecomm"
!@pp:savecomm
*pl "text" & !@< строка кода и спецкомментарий не удалятся
!@ спецкомментарий останется в конечном файле
"Включаем обработку обратно командой !@pp:nosavecomm"
!@pp:nosavecomm
"Так же отключать обработку спецкомментариве можно по условию:"
!@pp:if(name==123):savecomm
"Поскольку условие выполняется" & !@< строка кода и спецкомментарий сохраняются
!@ данный спецкомментарий так же сохранится
!@pp:endif
!@pp:если команда не распознана препроцессором, строка с неизвестной командой игнорируется
!@pp:if(layer2):include
"Эти строки кода не сохранятся так как метка layer2 не была определена,
а данные строки кода должны быть включены в конечный файл только
при наличии метки."
!@pp:endif
"Можно отключить препроцессор на время, по условию. Это делается с помощью директивы nopp:"
!@pp:if(layer1):nopp
"Отключение заставляет препроцессор игнорировать все команды кроме !@pp:endif" & !@ например данный спецкомментарий сохранится
"Эта строка кода так же сохранится" & !@<
!@pp:данная строка тоже сохранится в конечном файле
!@pp:nosavecomm
!@ можно заметить, что nosavecomm не заставила препроцессор вновь обрабатывать спецкомментарии
"А сейчас блок условия будет закрыт и препроцессор возобновит нормальную работу"
!@pp:endif
"Хочу обратить ваше внимание, что команды препроцессора работают, даже если
записаны внутри строк. Для этого достаточно записать команду препроцессора
отдельной строкой в многострочном текстовом значении:
!@pp:if(layer1):exclude
Эти строки будут исключены из конечного файла,
так как сработала команда препроцессора
!@pp:endif
Будьте аккуратны при работе с командами препроцессора.
Если вам нужно именно вывести команду препроцессора отдельной строкой,
используйте отдельные кавычки для этой строки"
"!@pp:if(layer1):exclude"
"!@pp:endif"
--- [start] ---------------------------------