# Примечание

**Внимание!!!** В файле JSON не должно быть комментариев. Удалите все комментарии перед использованием.

Структура файла описывается с учётом терминологии `python`.

В фигурных скобках идёт содержимое словарей, типа `"ключ1":"значение1", "ключ2":"значение2", "ключ3":"значение3"`.
- "*ключ*" - только текстовое значение
- "*значение*" - может быть непосредственно текстовое или числовое значение, объект, словарь, список
В квадратных скобках идёт список, типа `"объект1", "объект2", "объект3"`. Через запятую перечисляются текстовые или числовые значения, объекты, словари, списки и т.д.
# qsp-project.json

Файл, описывающий структуру проекта игры на QSP.
## структура

```json
{	// корневой элемент (словарь)
	"project": // описание проекта, порядок сборки модулей
	[ // список модулей, которые хотим получить
		{ // каждый модуль будет представлять собой словарь
			"module": "game.qsp", // путь к выходному файлу модуля
			"folders": // папки с исходниками для сборки
			[
				{ // текущая папка. Относительный путь
					"path": ".",
					"exclude": [
						// список путей, исключаемых из сборки
						".\\ex", // исключаем папку
						".\\old\\file.qsps" // исключаем файл
					]
				},
				{ // абсолютный путь к внешней папке
					"path": "D:\\my\\projects\\Вопросы",
				},
				{
					"path": "projects\\Вопросы",
				} // внимание! недопустимо заканчивать список запятой!!!!
			],
			"files": // или/и перечисляем файлы исходников для сборки
			[
				{
					"path":"D:\\my\\projects\\01_меню.qsps_",
				},
				{
					"path":"game.qspt",
				}
			]
		},
		{	// второй модуль
			"module": "lib\\drive.qsp", // файл появится во вложенной папке lib
			"folders":
			[
				{ // поднимаемся на две папки вверх относительно папки проекта
				  // и входим в папку old_proj\lib и уже оттуда подбираем файлы.
					"path": "..\\..\\old_proj\\lib",
				}
			],
			"files":
			[
				{"path": "old-lib\\easy.math.old.qsps"},
				{"path": "old-lib\\easy.dialog.old.txt-qsp"}
			],
			// подключаем скрипты постобработки
			// исключительно для данного модуля
			"postprocessors": ["old-lib\\simplename_for_func.py"]
		}
	],
	// путь к модулю (файлу игры), который будет запущен в плеере после сборки:
	"start": "game.qsp",
	// путь до плеера, в котором будет запущен файл игры
	"player":"D:\\my\\GameDev\\QuestSoftPlayer\\QSP 570 QG 400b\\qspgui.exe",
	// сторонний конвертер, с помощью которого будет производиться конвертирование
	// файлов qsps в файлы QSP.
	"converter": [
		// путь к конвертеру
		"D:\\my\\GameDev\\QuestSoftPlayer\\QSP 570 QG 400b\\txt2gam.exe",
		// дополнительные параметры для конвертирования
		"-u -pMyPass"
	],
	// Сохранение промежуточных файлов в формате txt2gam
	"save_temp_files": True,
	// включаем обработку всех файлов проекта препроцессором
	"preprocessor": "On",
	// подключаем скрипты постобработки, применяемые ко всем модулям проекта
	"postprocessors":["..\\example_postprocessor\\scripts\\renamemass.py"],
	// сложный параметр scans нужен для встраивания в игру особой локации,
	// на которой присутствует список всех подтянутых из папок файлов
	// локация встраивается в основной модуль игры
	"scans": {
		// предпочтительное название локации
		"location": "название локации",
		"folders":[
			// Список папок, файлы из которых нужно просканировать.
			// Пути указываются относительно файла project.json
			"..\\example_game\\res\\img\\diary",
			"..\\example_game\\res\\img\\drive",
			"..\\example_game\\res\\img\\ico",
			"..\\example_game\\res\\img\\obj"
		],
		"files":[
			// так же можно задать список отдельных файлов,
			// подтягиваемых в эту же локацию
			"..\\example_game\\res\\img\\scl\\scale-green-leo.bmp",
			"..\\example_game\\res\\img\\scl\\scale-space-leo.bmp",
			"..\\example_game\\res\\img\\scl\\scl.rainbow.gif"
		]
	}
}
```
# qsp-project-workspace.json

В этом файле описывается текущее "рабочее пространство" проекта игры на QSP.

Рабочее пространство условное. Скорее это просто различные состояния в кэшированном виде для более быстрого решения некоторых проблем с помощью плагина.

## структура

```json
{ // корневой элемент словарь
	"locations": // локации, созданные в рамках проекта
	{ // словарь
		// ключами являются пути относительно основной папки sublime text проекта.
		// данные ключи удобны, потому что пути к файлам уникальны
		"[examples]\\example_project\\drive\\magic\\spells.qsps":
		[ // один файл может содержать несколько локаций, поэтому
		  // значением является список
		  [ // каждый элемент списка в свою очередь
		    // является списком из двух значений:
			"magic.menergy.spell", // название локации
			[2, 21] // номера символов вхождения названия в файлы [начало, конец]
		  ],
		  [
			"magic.add.spell",
			[2844, 2859]
		  ]
		],
		// "[examples]...": [...],
		//...
	},
	"files_paths": // файлы проекта
	{ // тоже словарь
		// ключами являются абсолютные пути к файлам
		"D:\\JAD\\[examples]\\example_project\\drive\\magic\\spells.qsps": "b23d1eb836db124bee822f028f3f5459",
		// значениями являются хэш-суммы файлов
	}
}
```