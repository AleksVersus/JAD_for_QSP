# Краткая инструкция по установке JAD_QBST для Sublimetext с нуля

> Данная инструкция расчитана на пользователей Windows 10, у которых не установлен интерпретатор Python и редактор SublimeText.

Для написания и запуска игр из SublimeText вам понадобится:

1. Установленный плеер QSP;
2. Установленный интерпретатор Python;
3. Установленный SublimeText;
4. А так же последний релиз JAD_QBST.

Внимательно прочитайте нижеследующую инструкцию, даже если какой-то из компонентов у вас уже установлен.

## Этап 1. Установка плеера QSP

1. Обязательно скачайте [классический плеер QSP версии 5.8.0](https://qsp.org/index.php?option=com_content&view=article&id=64&Itemid=87) и разместите его в папке "`C:\Program Files\QSP\qsp580`". Делается это так:
	* Скачайте [zip-архив с плеером](https://qsp.org/attachments/qsp580b7.zip);
	* Откройте папку "`C:\Program Files`";
	* В ней создайте папку "`QSP`" и откройте;
	* В ней создайте и откройте папку "`qsp580`";
	* Откройте ранее скачаный zip-архив и все файлы из него скопируйте (можно просто перетащить) в папку "`qsp580`".
	* Таким образом путь до "`qspgui.exe`" должен выглядеть так: "`C:\Program Files\QSP\qsp580\qspgui.exe`". Запишите этот путь.

2. Можете так же скачать любой другой нужный вам плеер и установить в систему.

## Этап 2. Установка интерпретатора Python

1. Зайдите на [python.org](https://www.python.org) и скачайте версию python, подходящую для вашей системы:<br />![скачивание python](https://i.ibb.co/M8NzhdW/python.png);
2. Запустите установщик и обязательно поставьте галочку на пункте "Add pythom.exe to PATH";
3. Нажмите кнопку "Install now" и дождитесь окончания установки.
4. Закройте установщик кнопкой "Close".
5. Проверьте, куда установился python:
	* На клавиатуре нажмите одновременно клавиши "`Win + R`";
	* В открывшемся окне введите `cmd` и нажмите "`Enter`";
	* В открывшейся командной строке введите команду `where python` и нажмите "`Enter`".
	* Запишите путь до интерпретатора, он понадобится вдальнейшем:<br>![путь к python](https://i.ibb.co/9Y6H4GQ/sdrgsewrghsfdg.png)

## Этап 3. Установка SublimeText

1. Зайдите на [sublimetext.com](https://www.sublimetext.com) и скачайте последнюю версию SublimeText.
2. Запустите установщик и следуйте инструкциям до завершения установки.
3. Откройте папку расположения SublimeText. Для этого:
	* В меню **"Пуск"** найдите ярлык SublimeText;
	* Щёлкните по нему правой кнопкой мыши;
	* В контекстном меню выберите пункт **"Дополнительно" → "Перейти к расположению файла"**<br>![SublimeText](https://i.ibb.co/XpQBxnV/dghddfghfgdh.png)
	* В открывшейся папке снова найдите ярлык SublimeText;
	* Щёлкните правой кнопкой мыши и в контекстном меню выберите пункт **Расположение файла**;
	* Откроется папка, в которой расположен SublimeText.

## Этап 4. Установка JAD_QBST для SublimeText

1. Скачайте последний релиз [JAD_QBST](https://github.com/AleksVersus/JAD_for_QSP/releases);
2. Откройте папку "`C:\Program Files\QSP`" и извлеките в неё всё содержимое из скачанного архива. Таким образом по пути "`C:\Program Files\QSP\QBST\main.py`" у вас должен быть доступен файл "`main.py`".
3. Переместите файл "`QSP.sublime-package`" на рабочий стол и откройте с помощью любого архиватора, например, WinRar.
4. Извлеките файл "`QSP.sublime-build`" и откройте его текстовым редактором.
5. Замените в файле путь "`C:\\Program Files\\Python39\\python.exe`" на путь до своего интерпретатора python (см. этап 2) четыре раза!<br><span style="color:#880000;font-weight: bold;">Важно!!!</span> Все бэкслэши должны быть продублированны!
6. Замените путь "`C:\\Program Files (x86)\\QSP\\QBST\\main.py`" на свой путь до "`main.py`" из пункта два. То есть на "`C:\Program Files\QSP\QBST\main.py`" четыре раза!<br><span style="color:#880000;font-weight: bold;">Важно!!!</span> Все бэкслэши должны быть продублированны!
7. Сохраните файл "`QSP.sublime-build`" и упакуйте обратно в "`QSP.sublime-package`" с заменой.
8. В папке с установленным SublimeText откройте подпапку "`Packages`" и скопируйте в неё файл "`QSP.sublime-package`".

## Этап 5. Первая игра в SublimeText

1. Откройте SublimeText и создайте новый файл. Это будет тестовый файл.
2. Зайдите в главное меню в пункты "View" → "Syntax" → "QSP", чтобы включить подсветку синтаксиса для qsps-файлов.
3. Напишите следующий код:
```qsp
QSP-Game Testgame
# start
*pl "Hello world!"
- start
```
4. Сохраните файл с расширением "`.qsps`". Например, как "`test.qsps`".
5. Нажмите на клавиатуре одновременно клавиши "`Ctrl + F5`".
6. Игра автоматически сконвертируется и запустится в плеере:<br>![Запуск тестовой игры](https://i.ibb.co/8M17bbZ/image.png).

> Если вы установили плеер не по пути, указанном на этапе 1, могут возникнуть ошибки.

Если игра нормально запустилась, рядом с фалом qsps вы найдёте три новых файла: "`errors.log`", "`project.json`" и "`test.qsp`". У последнего файла может быть другое имя, если вы ваш тестовый файл назвали иначе.

Файл "`project.json`" можно видоизменять. Именно такие файлы нужны, чтобы управлять сборкой вашей игры из SublimeText.

## Этап 6. Перевод проекта из Quest Generator в SublimeText

На этом этапе вы можете конвертировать все ваши QSP-файлы в файлы формата qsps.

1. Обязательно сохраните резервную копию вашей игры формата QSP перед дальнейшими манипуляциями.
2. Откройте папку "`C:\Program Files\QSP\QBST\qSpy`".
3. Откройте файл "`main_cs.py`" в текстовом редакторе (могут понадобиться права администратора).
4. В функции `main()` измените значение переменной `folder_path`, заменив его на путь к папке, в которой лежит ваша QSP-игра:
```python
def main():
	folder_path = "C:\\GameDev\\TestGame\\test.qsp"
	FinderSplitter(folder_path=folder_path)
```
5. Не забывайте экранировать бэкслэши дублированием.
6. Сохраните скрипт. 
7. Запустите его `main.py` через установленный с Python IDLE, либо прямо из SublimeText, нажав сочетание клавиш "`Ctrl + B`".

Рядом с вашей QSP-игрой будет создана одноимённая папка, в которой появятся разбитые на отдельные qsps-файлы все локации вашей игры.

Если в папке был не один QSP-файл, то на каждый из таких файлов будет создано по своей папке с локациями.

Остаётся только разместить "`project.json`" в папке с игрой и прописать в нём параметры сборки: из каких папок подтягивать локации, в какой файл собирать готовую QSP-игру.


## Другая информация

Подробнее о настройке "`project.json`" можно прочитать в полной инструкции: [**README.md**](https://github.com/AleksVersus/JAD_for_QSP/blob/master/README.md)

О том, как пользоваться конвертером-разделителем, есть отдельная инструкция: [**простой запуск конвертера разделителя**](https://github.com/AleksVersus/JAD_for_QSP/blob/master/QBST/qSpy/readme.md#простой-запуск-конвертера-разделителя-скрипт-main_cspy).

