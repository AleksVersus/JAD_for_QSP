# Краткая инструкция по установке QSP-Package для Sublime Text с нуля

> [!warning] Внимание.
> Данная инструкция расcчитана на пользователей Windows 10, у которых не установлен редактор Sublime Text.

Для написания и запуска игр из Sublime Text вам понадобится:

1. Установленный плеер QSP;
2. Установленный Sublime Text;
3. А так же последний релиз QSP-Package.

Внимательно прочитайте нижеследующую инструкцию, даже если какой-то из компонентов у вас уже установлен.
## Этап 1. Установка плеера QSP

> [!tips] В настоящее время
> Байт выпускает плеер сразу в нескольких видах, в том числе и в виде готового установочного файла. Вы можете запустить такой файл и, следуя инструкции на экране, провести установку. Путь до плеера в этом случае может отличаться. Например, он может быть таким: `C:\Program Files (x86)\QSP Classic 5.9.0\bin\qspgui.exe`.
> 
> В этом случае вам нужно будет указать этот путь в параметре "player" в файле "`qsp-project.json`". 
> 
> **Будьте внимательны.** Инструкция ниже может быть устаревшей.

1. Обязательно скачайте [классический плеер QSP версии 5.9.0](https://qsp.org/index.php?option=com_content&view=article&id=64&Itemid=87) и разместите его в папке "`C:\Program Files\QSP\qsp590`". Делается это так:
	* Скачайте [zip-архив с плеером](https://qsp.org/attachments/qsp580b7.zip);
	* Откройте папку "`C:\Program Files`";
	* В ней создайте папку "`QSP`" и откройте;
	* В ней создайте и откройте папку "`qsp590`";
	* Откройте ранее скачанный zip-архив и все файлы из него скопируйте (можно просто перетащить) в папку "`qsp590`".
	* Таким образом путь до "`qspgui.exe`" должен выглядеть так: "`C:\Program Files\QSP\qsp580\qspgui.exe`". Запишите этот путь.
2. Можете так же скачать любой другой нужный вам плеер и установить в систему.

## Этап 2. Установка Sublime Text

1. Зайдите на [sublimetext.com](https://www.sublimetext.com) и скачайте последнюю версию Sublime Text.
2. Запустите установщик и следуйте инструкциям до завершения установки.

## Этап 3. Установка пакета QSP в Sublime Text

1. Скачайте установочный файл из [последнего релиза](https://github.com/AleksVersus/JAD_for_QSP/releases). Файл будет называться "`install.QSP.sublime-package.XX.exe`", где `XX` — номер версии.
2. Запустите "`install.QSP.sublime-package.XX.exe`" и следуйте инструкциям. Пакет автоматически установится в Sublime Text.
3. Перезагрузите Sublime Text, если он был запущен.

## Этап 4. Первая игра в Sublime Text

1. Откройте Sublime Text.
2. Зайдите в главное меню в пункты "Tools" → "QSP Tools" → "Make New Game".
3. Напишите следующий код:
```qsp
QSP-Game Testgame
# start
*pl "Hello world!"
- start
```
4. Сохраните файл с расширением "`.qsps`". Например, как "`test.qsps`".
5. Нажмите на клавиатуре одновременно клавиши "`Ctrl + F5`".
6. Игра автоматически сконвертируется и запустится в плеере:<br>![Запуск тестовой игры](https://i.ibb.co/8M17bbZ/image.png)

> [!warning] Внимание.
> Если вы установили плеер не по пути, указанном на этапе 1, игра соберётся, но не будет запущена.

Если игра нормально запустилась, рядом с файлом `.qsps` вы найдёте два новых файла: "`qsp-project.json`" и "`test.qsp`". У последнего файла может быть другое имя, если вы ваш тестовый файл назвали иначе.

Файл "`qsp-project.json`" можно видоизменять. Именно такие файлы нужны, чтобы управлять сборкой игры из Sublime Text.

Вы можете сразу создать **готовый проект QSP** в стандартном виде, если воспользуетесь меню `Tools → QSP Tools → Make Quick Project`.

## Этап 5. Перевод проекта из Quest Generator в Sublime Text

На этом этапе вы можете конвертировать все ваши QSP-файлы в файлы формата qsps.

1. Обязательно сохраните резервную копию вашей игры формата QSP перед дальнейшими действиями.
2. Откройте любой файл из папки с вашей игрой в Sublime Text. Это может быть как QSP-файл, так и обычный текстовый файл, или файл "`qsp-project.json`" или даже "`.qproj`".
3. В главном меню Sublime Text выберите `Tools`
4. В меню `Tools` найдите и запустите Сплиттер Проекта: `QSP tools → Splitters → Split Project`.

Рядом с вашей QSP-игрой будет создана одноимённая папка, в которой появятся разбитые на отдельные qsps-файлы все локации вашей игры.

Если в папке был не один QSP-файл, то на каждый из таких файлов будет создано по своей папке с локациями.

Остаётся только разместить "`qsp-project.json`" в папке с игрой и прописать в нём параметры сборки: из каких папок подтягивать локации, в какой файл собирать готовую QSP-игру.
## Другая информация

Подробнее о настройке "`qsp-project.json`" можно прочитать в полной инструкции: [**README.md**](README.md)
