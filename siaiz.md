# Краткая инструкция по установке QSP-Package для Sublimetext с нуля

> Данная инструкция расчитана на пользователей Windows 10, у которых не установлен интерпретатор Python и редактор SublimeText.

Для написания и запуска игр из SublimeText вам понадобится:

1. Установленный плеер QSP;
2. Установленный SublimeText;
3. А так же последний релиз QSP-Package.

Внимательно прочитайте нижеследующую инструкцию, даже если какой-то из компонентов у вас уже установлен.

## Этап 1. Установка плеера QSP

1. Обязательно скачайте [классический плеер QSP версии 5.8.0](https://qsp.org/index.php?option=com_content&view=article&id=64&Itemid=87) и разместите его в папке "`C:\Program Files\QSP\qsp580`". Делается это так:
	* Скачайте [zip-архив с плеером](https://qsp.org/attachments/qsp580b7.zip);
	* Откройте папку "`C:\Program Files`";
	* В ней создайте папку "`QSP`" и откройте;
	* В ней создайте и откройте папку "`qsp580`";
	* Откройте ранее скачаный zip-архив и все файлы из него скопируйте (можно просто перетащить) в папку "`qsp580`".
	* Таким образом путь до "`qspgui.exe`" должен выглядеть так: "`C:\Program Files\QSP\qsp580\qspgui.exe`". Запишите этот путь.

2. Можете так же скачать любой другой нужный вам плеер и установить в систему.

## Этап 2. Установка SublimeText

1. Зайдите на [sublimetext.com](https://www.sublimetext.com) и скачайте последнюю версию SublimeText.
2. Запустите установщик и следуйте инструкциям до завершения установки.
3. Откройте папку расположения SublimeText. Для этого:
	* В меню **"Пуск"** найдите ярлык SublimeText;
	* Щёлкните по нему правой кнопкой мыши;
	* В контекстном меню выберите пункт **"Дополнительно" → "Перейти к расположению файла"**<br>![SublimeText](https://i.ibb.co/XpQBxnV/dghddfghfgdh.png)
	* В открывшейся папке снова найдите ярлык SublimeText;
	* Щёлкните правой кнопкой мыши и в контекстном меню выберите пункт **Расположение файла**;
	* Откроется папка, в которой расположен SublimeText.

## Этап 3. Установка пакета QSP в SublimeText

1. Скачайте последний релиз [пакета QSP для Sublime Text](https://github.com/AleksVersus/JAD_for_QSP/releases) в виде rar-архива;
2. Извлеките из архива файл "`QSP.sublime-package`"
3. В папке с установленным SublimeText откройте подпапку "`Packages`" и переместите в неё файл "`QSP.sublime-package`".

## Этап 4. Первая игра в SublimeText

1. Откройте SublimeText и создайте новый файл. Это будет тестовый файл.
2. Зайдите в главное меню в пункты "View" → "Syntax" → "QSP", чтобы включить подсветку синтаксиса для qsps-файлов.
3. Напишите следующий код:
```qsp
QSP-Game Testgame
# start
*pl "Hello world!"
- start
```
4. Сохраните файл с расширением "`.qsps`". Например, как "`test.qsps`".
5. Нажмите на клавиатуре одновременно клавиши "`Ctrl + F5`".
6. Игра автоматически сконвертируется и запустится в плеере:<br>![Запуск тестовой игры](https://i.ibb.co/8M17bbZ/image.png).

> Если вы установили плеер не по пути, указанном на этапе 1, игра соберётся, но не будет запущена.

Если игра нормально запустилась, рядом с фалом qsps вы найдёте три новых файла: "`errors.log`", "`project.json`" и "`test.qsp`". У последнего файла может быть другое имя, если вы ваш тестовый файл назвали иначе.

Файл "`project.json`" можно видоизменять. Именно такие файлы нужны, чтобы управлять сборкой игры из SublimeText.

## Этап 5. Перевод проекта из Quest Generator в SublimeText

На этом этапе вы можете конвертировать все ваши QSP-файлы в файлы формата qsps.

1. Обязательно сохраните резервную копию вашей игры формата QSP перед дальнейшими манипуляциями.
2. Откройте любой файл из папки с вашей игрой в Sublime Text. Это может быть как QSP-файл, так и обычный текстовый файл, или файл "`project.json`" или даже "`.qproj`".
3. В главном меню Sublime Text выберите `Tools`
4. В меню `Tools` yайдите и запустите Сплиттер Проекта: `QSP tools → Splitters → Split Project`.

Рядом с вашей QSP-игрой будет создана одноимённая папка, в которой появятся разбитые на отдельные qsps-файлы все локации вашей игры.

Если в папке был не один QSP-файл, то на каждый из таких файлов будет создано по своей папке с локациями.

Остаётся только разместить "`project.json`" в папке с игрой и прописать в нём параметры сборки: из каких папок подтягивать локации, в какой файл собирать готовую QSP-игру.


## Другая информация

Подробнее о настройке "`project.json`" можно прочитать в полной инструкции: [**README.md**](https://github.com/AleksVersus/JAD_for_QSP/blob/master/README.md)

О том, как пользоваться конвертером-разделителем, есть отдельная инструкция: [**простой запуск конвертера разделителя**](https://github.com/AleksVersus/JAD_for_QSP/blob/master/QSP.sublime-package/qSpy/readme.md#простой-запуск-конвертера-разделителя-скрипт-main_cspy).
