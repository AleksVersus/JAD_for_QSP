# Конвертер-разделитель QSP-игр

Данный набор скриптов включает в себя следующие элементы:

* `qsp_to_qsps.py` — скрипт конвертера, конвертирующий QSP-файл игры в qsps-файл (файл формата TXT2GAM)
* `qsp_splitter.py` — скрипт разделителя. Использует скрипт конвертера в случае, если должен обработать QSP-файл игры.
* `main.py` — управляющий скрипт. Данный скрипт упрощает работу с большими проектами, уже разбитыми на несколько QSP-файлов (модулей). Позволяет просканировать текущую папку на наличие в ней QSP-файлов, сконвертировать все найденные файлы в qsps-формат, а затем разбить на отдельные файлы локаций.

## Простой запуск конвертера-разделителя. Скрипт `main.py`

Простой запуск выполняется с помощью скрипта `main.py`. Данный скрипт проводит работу в двух режимах:

1. Поиск и конвертация всех QSP-файлов в папке. Скрипт:
	* отыщет все QSP-файлы (файлы с расширением `.qsp`) и все qsps-файлы (файлы с расширением `.qsps`) в указанной папке (по умолчанию текущая);
	* QSP-файлы сконвертирует в qsps;
	* qsps-файлы (ранее созданные и новые) разделит на отдельные файлы локаций.
	* В результате на каждый QSP-файл или qsps-файл будет создана одноимённая папка, в которой будут размещены подпапки и файлы локаций согласно структуре файла `.qproj`. Если соответствующий файл `.qproj` не найден, все локации будут помещены в одну папку.
2. Конвертирование `game.txt`. Данный режим запускается, если не удалось найти ни одного QSP- и qsps-файла при запуске первого режима.
	* Скрипт попытается найти файл `game.txt` в указанной папке.
	* Если файл будет найден, будет создана папка `export_game`, в которую попадут папки и файлы локаций согласно структуре файла `game.qproj`.
	* Если файл не будет найден, скрипт завершит работу выводом надписи об ошибке.

Чтобы сконвертировать в наборы файлов локаций все составляющие игры (основной QSP-файл и модули):

* разместите составляющие файлы и их одноймённые файлы `.qproj` в папке со скриптом
* запустите скрипт

## Требования к qsps-файлам

Если необходимо разбить на части не QSP-файл, а qsps, такой файл должен быть экспортированным из Quest Generator в формате qsps (TXT2GAM), или получен применением конвертера `qsp_to_qsps.py`.

* Кодировка UTF-8. Либо UTF-16 с BOM-символом в начале.
* Начало локации должно записываться как:
```qsp
# название_локации
```
* Конец локации обязательно должен записываться как
```qsp
--- название_локации ---------------------------------
```

	